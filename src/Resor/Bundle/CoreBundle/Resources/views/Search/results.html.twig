{% extends '::base.html.twig' %}

{% block title %}Resor{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/resorcore/css/results.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
{% endblock %}

{% block headjs %}
    <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script>
    {% javascripts
        '@ResorCoreBundle/Resources/public/js/vendor/angular/angular.js'
        '@ResorCoreBundle/Resources/public/js/vendor/jquery/dist/jquery.js'
        '@ResorCoreBundle/Resources/public/js/vendor/gmaps/gmaps.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block javascripts %}
    {% javascripts
        '@ResorCoreBundle/Resources/public/js/results.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block body %}
    <div class="result-page" ng-app="resultsApp">
        <div class="map-wrapper">
            <div id="map" class="map-container"></div>
            <input type="hidden" name="lat" class="js-lat" value="{{ lat }}">
            <input type="hidden" name="lng" class="js-lng" value="{{ lng }}">
        </div>
        <div class="top-bar">
            <h3 class="resor-title">Resor</h3>
        </div>
        <div class="content" ng-controller="ResultCtrl">
            <div class="filters-bar">
                <ul class="filters">
                    <div class="primary-filters">
                        <li class="filter-place filter">
                            <strong>Lille <i class="fa fa-pencil"></i></strong>
                        </li>
                        <li class="filter-from filter">
                            du <strong>12 janvier <i class="fa fa-pencil"></i></strong>
                        </li>
                        <li class="filter-to filter">
                            au <strong>18 janvier <i class="fa fa-pencil"></i></strong>
                        </li>
                    </div>
                    <div class="filter filters-expand">
                        <strong>
                            Filtres  <i class="fa fa-caret-down"></i>
                        </strong>
                    </div>
                    <div class="filters-to-expand">
                        <ul class="secondary-filters">
                            <li class="secondary-filter" ng-repeat="filter in filters">
                                {% verbatim %}
                                    <input type="checkbox" id="{{filter.name}}_checkbox" ng-model="filter.on">
                                    <label for="{{filter.name}}_checkbox">{{ filter.name }}</label>
                                {% endverbatim %}
                            </li>
                        </ul>
                    </div>
                </ul>
            </div>
            <div class="results-body">
                <ul class="results">
                    <li class="result" ng-repeat="result in filtered=(results| filter:filterByFeatures)">
                        <div class="result-photo-wrapper">
                            <img src="{{ asset('bundles/resorcore/images/placeholders/camping2.jpg') }}">
                        </div>
                        {% verbatim %}
                        <div class="result-infos">
                            <h4 class="result-title">{{ result.title }}</h4>
                            <p class="result-description">{{ result.description }}</p>
                        </div>
                        <div class="result-submit">
                            <div class="result-price">
                                <span class="result-daily-price">
                                    <span class="result-amount">{{ result.price }}â‚¬</span>/jour
                                </span>
                            </div>
                            <button class="result-submit-button">Reserver</button>
                        </div>
                        {% endverbatim %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
