{% extends '::base.html.twig' %}

{% block title %}Resor{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/resorcore/css/results.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
{% endblock %}

{% block headjs %}
    <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script>
    {% javascripts
        '@ResorCoreBundle/Resources/public/js/vendor/angular/angular.js'
        '@ResorCoreBundle/Resources/public/js/vendor/jquery/dist/jquery.js'
        '@ResorCoreBundle/Resources/public/js/vendor/gmaps/gmaps.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block javascripts %}
    {% javascripts
        '@ResorCoreBundle/Resources/public/js/results.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block body %}
    <div class="result-page" ng-app="resultsApp">
        <div class="map-wrapper">
            <div id="map" class="map-container"></div>
            <div class="map-position">
                <i class="fa fa-search"></i>
                <strong class="map-position-place">{{place}}</strong>
                <input type="hidden" name="lat" class="js-lat" value="{{ lat }}">
                <input type="hidden" name="lng" class="js-lng" value="{{ lng }}">
                <div class="change-position">Changer la position</div>
            </div>
        </div>
        <div class="top-bar">
            <h3 class="resor-title">Resor</h3>
        </div>
        <div class="content" ng-controller="ResultCtrl">
            <div class="filters-bar">
                <h4 class="result-number">6 résultats</h4>
                <ul class="filters">
                    {% verbatim %}
                    <li class="filter" ng-repeat="filter in filters">
                        <input type="checkbox" id="{{filter.name}}_checkbox" ng-model="filter.on">
                        <label for="{{filter.name}}_checkbox">{{filter.name | capitalize }}</label>
                    </li>
                    {% endverbatim %}
                </ul>
            </div>
            <div class="results-body">
                <ul class="results" ng-repeat="result in filtered=(results| filter:filterByFeatures)">
                    <li class="result">
                        <div class="result-photo-wrapper">
                            <img src="{{ asset('bundles/resorcore/images/placeholders/camping1.jpg') }}">
                        </div>
                        {% verbatim %}
                        <div class="result-infos">
                            <h4 class="result-title">{{ result.title }}</h4>
                            <p class="result-description">{{ result.description }}</p>
                        </div>
                        <div class="result-submit">
                            <div class="result-price">
                                <span class="result-daily-price">
                                    <span class="result-amount">{{ result.price }}€</span>/jour
                                </span>
                            </div>
                            <button class="result-submit-button">Reserver</button>
                        </div>
                        {% endverbatim %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
